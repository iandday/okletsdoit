{% extends "components/layout/base.html" %}

{% load static %}

{% block title %}
    {% if form.instance.pk %}
        Edit Guest
    {% else %}
        Add New Guest
    {% endif %}
{% endblock title %}
{% block content %}
    <div class="max-w-4xl mx-auto px-4 py-8">
        <!-- Page Header -->
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8">
            <div>
                <div class="text-sm breadcrumbs mb-2">
                    <ul>
                        <li>
                            <a href="{% url 'guestlist:guestlist_summary' %}"
                               class="link link-hover">Guest List</a>
                        </li>
                        {% if guest_group %}
                            <li>
                                <a href="{% url 'guestlist:guestgroup_detail' guest_group.slug %}"
                                   class="link link-hover">{{ guest_group }}</a>
                            </li>
                            <li class="text-base-content">{{ guest }}</li>
                        {% else %}
                            <li class="text-base-content">New Guest</li>
                        {% endif %}
                    </ul>
                </div>
                <h1 class="text-3xl font-bold text-base-content mb-2">
                    {% if form.instance.pk %}
                        Edit {{ guest }}
                    {% else %}
                        Add New Guest
                    {% endif %}
                </h1>
                <p class="text-base-content/60 mt-2">
                    {% if form.instance.pk %}
                        Update the details for this guest.
                    {% else %}
                        Add a new guest
                        {% if guest_group %}to {{ guest_group.name }}{% endif %}
                        .
                    {% endif %}
                </p>
                <div class="flex gap-2">
                    {% if guest_group %}
                        <a href="{% url 'guestlist:guestgroup_detail' guest_group.slug %}"
                           class="btn btn-outline">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 class="h-5 w-5"
                                 fill="none"
                                 viewBox="0 0 24 24"
                                 stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                            </svg>
                            Back to Group
                        </a>
                    {% else %}
                        <a href="{% url 'guestlist:guestlist_summary' %}"
                           class="btn btn-outline">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 class="h-5 w-5"
                                 fill="none"
                                 viewBox="0 0 24 24"
                                 stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                            </svg>
                            Back to Summary
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
        <!-- Form Card -->
        {% if guest %}
            {% url 'guestlist:guest_detail' guest.slug as cancel_url %}

            {% include "shared_helpers/object_form.html" with object=guest %}

        {% else %}
            {% url 'guestlist:guest_summary' as cancel_url %}

            {% include "shared_helpers/object_form.html" %}

        {% endif %}
    </div>
{% endblock content %}
{% block extra_script %}

    {% include "shared_helpers/script/object_form.html" with first_field="first_name" %}

{% endblock extra_script %}
