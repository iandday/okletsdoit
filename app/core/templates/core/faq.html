{% extends "components/layout/base.html" %}

{% load static %}

{% block title %}
    FAQ
{% endblock title %}
{% block content %}
    <img src="{% static 'core/img/faq.png' %}"
         alt="faq"
         class="max-w-sm rounded-lg justify-self-center" />
    <div class="flex flex-col items-center justify-center mx-auto px-4 py-8">
        {% if questions %}
            <div class="join join-vertical bg-base-200">
                {% for q in questions %}
                    <div class="collapse collapse-arrow join-item border-base-300 border">
                        <input type="radio"
                               name="my-accordion-4"
                               {% if forloop.first %}checked="checked"{% endif %} />
                        <div class="collapse-title font-semibold">{{ q.question }}</div>
                        <div class="collapse-content">
                            <div class="prose max-w-none">{{ q.answer|safe }}</div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p>Check back soon!</p>
        {% endif %}
    </div>
{% endblock content %}
{% block extra_script %}
    <script nonce="{{ request.csp_nonce }}">
      document.addEventListener('DOMContentLoaded', function() {
        // Apply list styling to all ul/ol elements in collapse content
        function applyListStyling() {
          const uls = document.querySelectorAll('.collapse-content ul');
          const ols = document.querySelectorAll('.collapse-content ol');

          uls.forEach(ul => {
            ul.style.listStyleType = 'disc';
            ul.style.listStylePosition = 'outside';
            ul.style.marginLeft = '2rem';
            ul.style.paddingLeft = '1rem';
            ul.style.marginBottom = '1rem';
          });

          ols.forEach(ol => {
            ol.style.listStyleType = 'decimal';
            ol.style.listStylePosition = 'outside';
            ol.style.marginLeft = '2rem';
            ol.style.paddingLeft = '1rem';
            ol.style.marginBottom = '1rem';
          });

          const lis = document.querySelectorAll('.collapse-content li');
          lis.forEach(li => {
            li.style.display = 'list-item';
            li.style.marginBottom = '0.5rem';
          });
        }

        // Apply immediately
        applyListStyling();

        // Also apply when collapse items are toggled (in case content is dynamically shown)
        const collapseInputs = document.querySelectorAll('.collapse input[type="radio"]');
        collapseInputs.forEach(input => {
          input.addEventListener('change', function() {
            setTimeout(applyListStyling, 100);
          });
        });
      });
    </script>
{% endblock extra_script %}
