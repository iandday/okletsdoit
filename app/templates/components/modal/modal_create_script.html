<!-- required variables
 show_id: The ID of the button that opens the modal.
 modal_id: The ID of the modal dialog.
 focus_id: The ID of the input field to focus when the modal opens.
 date_id: The ID of the date input field to set today's date as default.
-->
<script nonce="{{ request.csp_nonce }}">
  $(document).ready(function() {

    // Modal functionality
    const showAddModal = document.getElementById('show-add-deadline-modal');
    const addModal = document.getElementById('add_deadline_modal');
    const cancelAddBtn = document.getElementById('cancel_add_button');

    if (showAddModal && addModal) {
      showAddModal.addEventListener('click', function() {
        addModal.showModal();
        // Set today's date as default
        const dateField = document.getElementById('{{ date_id }}');
        if (dateField) {
          dateField.value = new Date().toISOString().split('T')[0];
        }
        // Focus on the item name field
        setTimeout(() => {
          const itemField = document.getElementById('{{ focus_id }}');
          if (itemField) {
            itemField.focus();
          }
        }, 100);
      });
    }

    if (cancelAddBtn && addModal) {
      cancelAddBtn.addEventListener('click', function() {
        addModal.close();
      });
    }


  });
</script>
