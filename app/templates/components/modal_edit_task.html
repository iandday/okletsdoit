<dialog id="editTaskModal-{{ id }}" class="modal">
    <div class="modal-box">
        <h3 class="text-lg font-bold text-primary">Edit Task</h3>
        <form method="post" action="{{ action }}" class="space-y-4">
            {% csrf_token %}
            <div class="form-control">
                <label class="label">
                    <span class="label-text font-medium">{{ form.title.label }}</span>
                </label>
                {{ form.title }}
                {% if form.title.errors %}
                    <div class="label">
                        {% for error in form.title.errors %}<span class="label-text-alt text-error">{{ error }}</span>{% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="form-control">
                <label class="label">
                    <span class="label-text font-medium">{{ form.description.label }}</span>
                </label>
                {{ form.description }}
                {% if form.description.errors %}
                    <div class="label">
                        {% for error in form.description.errors %}<span class="label-text-alt text-error">{{ error }}</span>{% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <div class="form-control">
                    <label class="label">
                        <span class="label-text font-medium">{{ form.due_date.label }}</span>
                    </label>
                    {{ form.due_date }}
                    {% if form.due_date.errors %}
                        <div class="label">
                            {% for error in form.due_date.errors %}<span class="label-text-alt text-error">{{ error }}</span>{% endfor %}
                        </div>
                    {% endif %}
                </div>
                <div class="form-control">
                    <label class="label">
                        <span class="label-text font-medium">{{ form.priority.label }}</span>
                    </label>
                    {{ form.priority }}
                    {% if form.priority.errors %}
                        <div class="label">
                            {% for error in form.priority.errors %}<span class="label-text-alt text-error">{{ error }}</span>{% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="form-control">
                <label class="label">
                    <span class="label-text font-medium">{{ form.assigned_to.label }}</span>
                </label>
                {{ form.assigned_to }}
                {% if form.assigned_to.errors %}
                    <div class="label">
                        {% for error in form.assigned_to.errors %}<span class="label-text-alt text-error">{{ error }}</span>{% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="form-control">
                <label class="label cursor-pointer">
                    <span class="label-text font-medium">{{ form.completed.label }}</span>
                    {{ form.completed }}
                </label>
                {% if form.completed.errors %}
                    <div class="label">
                        {% for error in form.completed.errors %}<span class="label-text-alt text-error">{{ error }}</span>{% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="modal-action">
                <button type="button"
                        class="btn btn-ghost"
                        id="close-edit-task-modal-{{ id }}">Cancel</button>
                <button type="submit" class="btn btn-primary">
                    <svg xmlns="http://www.w3.org/2000/svg"
                         class="h-4 w-4"
                         fill="none"
                         viewBox="0 0 24 24"
                         stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                    </svg>
                    Update Task
                </button>
            </div>
        </form>
    </div>
    <form method="dialog" class="modal-backdrop">
        <button>close</button>
    </form>
</dialog>
<script nonce="{{ request.csp_nonce }}">
  document.getElementById('show-edit-task-modal-{{ id }}').onclick = function() {
    document.getElementById('editTaskModal-{{ id }}').showModal()
  };
  document.getElementById('close-edit-task-modal-{{ id }}').onclick = function() {
    document.getElementById('editTaskModal-{{ id }}').close()
  };
</script>
